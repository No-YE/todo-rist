<%= turbo_frame_tag link, class: 'h-full' do %>
  <li class="col-span-1 flex flex-col divide-y divide-gray-200 rounded-lg shadow h-full <%= link.read? ? 'bg-slate-100' : 'bg-white' %>">
    <%= link_to link.url, target: '_blank', class: 'flex flex-1 flex-col items-center p-6 sm:p-8 h-80' do %>
      <% if link.completed? %>
        <span class="w-full h-32">
          <% if link.image_url.present? %>
            <%= image_tag link.image_url, class: 'mx-auto w-full h-32 flex-shrink-0 rounded-md object-contain' %>
          <% end %>
        </span>
        <h3 class="mt-6 text-center text-sm font-medium text-gray-900">
          <%= link.title %>
        </h3>
        <p class="text-left text-sm text-gray-500 max-md:line-clamp-5 text-ellipsis">
          <%= link.summary %>
        </p>
      <% else %>
        <div class="animate-pulse bg-slate-200 mx-auto w-64 h-32 flex-shrink-0 rounded-md"></div>
        <h3 class="mt-6 text-center text-sm font-medium text-gray-900">
          <%= t('.loading') %>
        </h3>
        <p class="text-left text-sm text-gray-500 max-md:line-clamp-5 text-ellipsis">
        </p>
      <% end %>
    <% end %>

    <div class="flex flex-column justify-between items-center px-6 sm:px-8 py-3 text-xs font-normal">
      <div class="flex">
        <span class="text-gray-500">
          <%= link_relative_created_at(link) %>
        </span>
        <% if link.due_date.present? && link.not_read? && link.user_id == current_user&.id %>
          <div class="ml-3 border-l border-gray-200 pl-3">
            <%= link_until_due_date(link) %>
          </div>
        <% end %>
      </div>
      <div class="flex">
        <% if link.user_id == current_user&.id %>
          <% if link.read? %>
            <%= link_to t('.unread'), unread_link_path(link), class: 'text-indigo-600 hover:text-indigo-500', data: { turbo_method: :put } %>
          <% else %>
            <%= link_to t('.read'), read_link_path(link), class: 'text-indigo-600 hover:text-indigo-500', data: { turbo_method: :put } %>
          <% end %>

          <div class="ml-3 border-l border-gray-200 pl-3">
            <%= link_to t('.delete'), link_path(link), class: 'text-indigo-600 hover:text-indigo-500', data: { turbo_method: :delete, turbo_confirm: t('.confirm_delete') } %>
          </div>
        <% else %>
          <%= link_to t('.clone_to_my'), clone_link_path(link), class: 'text-indigo-600 hover:text-indigo-500', data: { turbo_method: :post } %>
        <% end %>
      </div>
    </div>
  </li>
<% end %>
